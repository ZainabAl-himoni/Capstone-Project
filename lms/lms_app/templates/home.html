{% extends 'base.html' %}
{% block title %}Home - NestBooks Library{% endblock %}

{% block content %}
<br><h1>Welcome to NestBooks Library</h1>

<div class="container">
    <div class="main-books">
        <div class="books-container">
            {% for book in books %}
                <div class="book-card">
                    {% if book.photo_book %}
                        <img src="{{ book.photo_book.url }}" alt="{{ book.title }}">
                    {% else %}
                        <img src="https://via.placeholder.com/150x150" alt="No Image">
                    {% endif %}
                    <div class="book-title">{{ book.title }}</div>
                    <div class="book-rating">
                        {% for i in "★★★★★" %}
                            {% if forloop.counter <= book.rating %}
                                ★
                            {% else %}
                                ☆
                            {% endif %}
                        {% endfor %}
                    </div>
                    <div class="book-author">Author: {{ book.author }}</div>
                    <div class="book-price">Price: ${{ book.price }}</div>
                    <div class="book-status">Status: {{ book.status }}</div>
                </div>
            {% endfor %}
        </div>
    </div>

    <div class="sidebar">
        <h3>Books Distribution</h3>
        <div class="chart-container">
            <canvas id="booksPieChart"></canvas>
        </div>

        <h3>Categories</h3>
        {% for category in categories %}
            <div class="category">
                <strong>{{ category.name }}</strong>
                <ul>
                    {% for book in category.book_set.all %}
                        <li>{{ book.title }}</li>
                    {% empty %}
                        <li>No books</li>
                    {% endfor %}
                </ul>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
